<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Shortener</title>
    <style>
        body{
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        button{
        background-image: linear-gradient(#42A1EC, #0070C9);
        border: 1px solid #0077CC;
        border-radius: 4px;
        box-sizing: border-box;
        color: #FFFFFF;
        cursor: pointer;
        direction: ltr;
        display: block;
        font-family: "SF Pro Text","SF Pro Icons","AOS Icons","Helvetica Neue",Helvetica,Arial,sans-serif;
        font-size: 17px;
        font-weight: 400;
        letter-spacing: -.022em;
        line-height: 1.47059;
        min-width: 30px;
        overflow: visible;
        padding: 4px 15px;
        text-align: center;
        user-select: none;
        -webkit-user-select: none;
        touch-action: manipulation;
        white-space: nowrap;
        }

        button:hover {
        background-image: linear-gradient(#51A9EE, #147BCD);
        border-color: #1482D0;
        text-decoration: none;
        }

        button:active {
        background-image: linear-gradient(#3D94D9, #0067B9);
        border-color: #006DBC;
        outline: none;
        }
        table, th, td {
        border: 1px solid black;
        }
        td{
        padding: 6px;
        }
        input{
            width: 20%;
            height: 25px;
            border-radius: 6px;
            padding:4px;
            margin-left: 4px;
        }
        a{
            color: #FFFFFF;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <div>
    <h1>URL Shortener</h1>
    <% if(locals.id){ %>
    <p>URL Generated: <%= `${locals.protocol}://${locals.host}` %>/url/<%= locals.id %></p>
    <% } %>     
    <form method="post" action="/url">
        <label>Enter your url:</label>
        <input type="text" name="url" placeholder="https://www.example.com">
        <br><br>
        <button type="submit">Submit</button>
    </form>
    <br>
    </div>
    <button><a href="<%= `${locals.protocol}://${locals.host}/` %>">Home</a></button>
    <br>
    <% if(locals.urls){ %>
    <div>
        <table>
            <thead>
                <th>S.No</th>
                <th>ShortURL</th>
                <th>Original URL</th>
                <th>Clicks</th>
            </thead>
            <tbody>
                <% urls.forEach((url,idx,arr)=>{ %>
                    <tr>
                        <td><%= idx+1 %> .</td>
                        <td><%= `${locals.protocol}://${locals.host}` %>/url/<%= url.shortId %></td>
                        <td><%= url.redirectURL %></td>
                        <td><%= url.visitHistory.length %></td>
                    </tr>
               <% }) %>
            </tbody>
        </table>
    </div>
    <% } %>
</body>
</html>